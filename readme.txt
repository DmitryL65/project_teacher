Основная информация
Интернет-магазин «В один клик» продаёт разные товары: для детей, для дома, мелкую бытовую технику, косметику и даже
продукты. Отчёт магазина за прошлый период показал, что активность покупателей начала снижаться. Привлекать новых клиентов
уже не так эффективно: о магазине и так знает большая часть целевой аудитории. Возможный выход — удерживать активность
постоянных клиентов. Сделать это можно с помощью персонализированных предложений.
Итак, вашему отделу поручили разработать решение, которое позволит персонализировать предложения постоянным клиентам, чтобы
увеличить их покупательскую активность.

Список файлов
market_file.csv - Таблица, которая содержит данные о поведении покупателя на сайте, о коммуникациях с покупателем и его
продуктовом поведении.
market_money.csv- Таблица с данными о выручке, которую получает магазин с покупателя, то есть сколько покупатель всего
потратил за период взаимодействия с сайтом.
market_time.csv - Таблица с данными о времени (в минутах), которое покупатель провёл на сайте в течение периода.
money.csv - Таблица с данными о среднемесячной прибыли покупателя за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю.

Весь процесс анализа данных в рамках работы по данному проекту будет разбит на части:
1) Введение
2) Загрузка данных
3) Предобработка данных
4) Исследовательский анализ
5) Объединение таблиц
6) Корреляционный анализ
7) Использование пайплайнов
8) Анализ важности признаков
9) Сегментация покупателей
10) Общий вывод

Основная рекомендация  - расширить ассортимент товаров в категории электроника, возможно ввести какие-то дополнительные акции и в целом проводить более активный менеджмент в этом направлении 

Далее основные выводы по каждому этапу

Предобработка
В рамках предобработки были переименованы названия столбов, проведена работа по поиску скрытых дубликатов, проверено 
наличие аномальных значений, в целом можно говорить о том, что датафрейм содержит в себе данные высокого качества


Исследовательский анализ данных
маркет_актив_тек_мес - Можно сказать, что значение распределено нормально, максимальное количество маркетинговых  коммуникаций в текущем месяце = 4, значения 5 и 3 фактически идентичны, разница в пределах погрешности
длительность - В среднем с момента регистрации покупателя на сайте прошло 600 дней, минимальное количество 110, странно, за  последние 110 дней 0 регистраций?
средний_просмотр_категорий_за_визит - Максимальное количество просмотренных категорий = 6, наиболее часто встречается число  3, в целом распределение около-нормальное
неоплаченные_продукты_штук_квартал - Распределение смещено влево (похоже на логнормальное), среднее значение 2.84,  максимальное  10, минимальное 1
ошибка_сервиса - Кому-то не очень везёт с ошибками сервиса, максимальное значение 9, среднее 4.18 
страниц_за_визит - Максимальное количество открытых страниц 20, среднее 8.18, распределение смещено влево (напоминает логнормальное)
маркет_актив_6_мес - Среднемесячная активность за пол года лежит в диапазоне от 0.9 до 6.6, среднее значение 4.25, в  диапазоне между 5-6 есть нестандартные значения
акционные_покупки - среднемесячная доля покупок по акции от общего числа покупок за последние 6 месяцев имеет два купола распределения, посмотрим каждый купол отдельно. Левый купол в диапазоне от 0 до 0.47, среднее значение 0.23. Правый купол в диапазоне от 0.74 до 0.99, среднее значение 0.94.
покуп_активность - 62% процента покупателей не снизили свою активность 
сервис - 71% имеют стандартный уровень сервиса
разрешить_сообщать - 74% разрешили делать себе рассылку
поп_категория - Самая популярная категория - для детей, на втором месте текстиль, третье - косметика
market_money['период'] - 33% по всем трём месяцам
market_money['выручка'] - Прекрасная картина, фактически идеальное распределение, максимальное значение выручки 7799,  минимальное 2759,медиана 5007
market_time['период'] - название периода, во время которого зафиксировано общее время 50 на 50
market_time['минут'] - Распределение нормальное, максимальное количество минут 23, минимальное 4, среднее значение 13.3
money['прибыль'] - Максимальное значение прибыли 7.4, минимальное значение 0.9, среднее 4 
Также был дан ответ на вопрос "Отберите клиентов с покупательской активностью не менее трёх месяцев, то есть таких, которые что-либо покупали в этот период", ответ -  каждый клиент был активен как минимум в один из этих месяцев 
Объединение таблиц
Таблицы были объединены согласно условию задачи


Корреляционный анализ
Cамая высокая связь  между показателями выручки за разные месяцы (0.78), при этом границу в 0.9 данная корреляция не переходит, также, нам требуется учесть динамику продаж по месяцам, поэтому оставляем все признаки в работе, считаем, что мультиколлинеартности в данных нет.
Использование пайплайнов
Мы обучили четыре модели: KNeighborsClassifier(), DecisionTreeClassifier(), LogisticRegression() и  SVC(). 
Для каждой из них были подобраны гиперпараметры .
В качестве метрики была выбрана roc-auc, ROC-AUC — это всеохватывающая метрика качества классификации. Она учитывает работу модели при всех возможных значениях порогов и поэтому не зависит от одного конкретного. 
Метрика ROC_AUC была использована при подборе гиперпараметров.
Был использован один общий пайплайн для всех моделей и инструмент подбора гиперпараметров, который вернул лучшую модель.
Лучшая модель LogisticRegression(C=32, penalty='l1', random_state=42,solver='liblinear'))]), метрика roc_auc лучшей модели = 0.9


Анализ важности признаков
Топ 3 важных признаков - выручка за предыдущий месяц, электроника, здоровье
Топ 3 не важных признаков - категория_посуда, ошибка, сервис
как можно использовать эти наблюдения при моделировании и принятии бизнес-решений - можно удалить ненужные признаки из модели и сделать её предиктивную способность лучше, дополнительно к этому можно увеличить ассортимент товаров электроника и здоровье, а также подумать как увеличить продолжительность нахождения на сайте  


Сегментация покупателей
Пользователи были разделены на 4 сегмента с учётом прибыли и вероятности её снижения, нас больше всего интересуют пользователи в верхнем правом квадрате. Прибыль> 4 и вероятность снижения прибыли > 0.5, они были отфильрованы, дажее был проведён дополнительный анализ, который позволил получить основные выводы исследования. 